(()=>{"use strict";function t(t){if("complete"===document.readyState)return t();window.addEventListener("load",t)}!function(){const e={token:"",currentUrl:new URL(window.location.href)},n={currentScript:void 0};async function o(t){const n=t.target,o=localStorage.getItem(`KWAI_UTM_TRACK_${e.token}`);await async function(t){try{console.log("ADD_TO_CART",{data:t}),await fetch("https://api.xtracky.com/api/integrations/addToCart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(3e3),keepalive:!0})}catch(t){console.warn("Erro ao enviar evento de carrinho:",t)}}({r:btoa(e.currentUrl.href),utmSource:o});const r=n.getAttribute("data-xtracky-redirect");r&&(window.location.href=r+window.location.search)}function r(t){if(!t)return;return n.currentScript?function(t){return t?.matches("[data-xtracky-addtocart]")}(t)||function(t){return!!t.matches("button")&&(!!e.text&&t?.innerText===e.text)}(t):void 0}function c(){document.addEventListener("click",a),function(e,n,o=document){t((()=>{n(o.querySelectorAll(e)),new MutationObserver((t=>{t.forEach((t=>{t.addedNodes&&t.addedNodes.length>0&&t.addedNodes.forEach((t=>{t instanceof Element&&(t.matches(e)&&n([t]),n(t.querySelectorAll(e)))}))}))})).observe(o,{childList:!0,subtree:!0})}))}("typebot-standard",(t=>{t.forEach((t=>{const e=t.shadowRoot;if(!e)return;const n=e;n?.removeEventListener?.("click",a),n?.addEventListener?.("click",a)}))}))}function a(t){const e=t.target;e&&r(e)&&o(t)}!function(){const t=document.currentScript;t&&(n.currentScript=t,e.token=t.getAttribute("data-token")||"",e.text=t?.getAttribute("data-xtracky-addtocart-by-text"),e.currentUrl=new URL(window.location.href))}(),t(c)}()})();
